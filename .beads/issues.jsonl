{"id":"bd-1yz","title":"MEDIUM: Fix checkpoint create --json timeout","description":"# Clarifications (Section 0)\n\n## Resolved Questions\n- --json flag should return JSON output without hanging\n\n## Open Questions\nNone\n\n## Assumptions\n- --json mode hangs after 120 seconds\n\n# EARS Requirements (Section 1)\n\n## Ubiquitous\nTHE SYSTEM SHALL complete checkpoint creation in reasonable time\n\n## Event-Driven\n- WHEN user runs 'zjj checkpoint create --json', THE SYSTEM SHALL return JSON output within 30 seconds\n\n## Unwanted\n- IF --json flag is used, THE SYSTEM SHALL NOT hang indefinitely, because Automation scripts depend on timely responses\n\n# KIRK Contracts (Section 2)\n\n## Preconditions\n- Checkpoint create command is invoked with --json\n\n## Postconditions\n- JSON output is returned or timeout occurs\n- No indefinite blocking\n\n## Invariants\n- Command completes within timeout\n\n# ATDD Tests (Section 4)\n\n## Happy Paths\n- checkpoint create --json returns within 30s\n\n## Error Paths\n- Timeout provides clean error message\n\n# Implementation Tasks (Section 6)\n\n## Phase 0: Research\n- [ ] Find checkpoint create code\n- [ ] Investigate why --json hangs\n\n## Phase 1: Implementation\n- [ ] Fix blocking behavior\n\n## Phase 2: Testing\n- [ ] Verify timeout behavior","status":"open","priority":2,"issue_type":"bug","created_at":"2026-02-11T11:51:03.545397391Z","created_by":"lewis","updated_at":"2026-02-11T11:51:03.545397391Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2bn","title":"LOW: Fix doctor exit code for warnings","description":"# Clarifications (Section 0)\n\n## Resolved Questions\n- Doctor currently returns exit 2 for warnings-only state\n\n## Open Questions\nNone\n\n## Assumptions\nNone\n\n# EARS Requirements (Section 1)\n\n## Ubiquitous\nTHE SYSTEM SHALL return exit 0 for healthy state with warnings\n\n## Event-Driven\n- WHEN doctor has only warnings, THE SYSTEM SHALL return exit code 0\n\n## Unwanted\n- IF only warnings exist, THE SYSTEM SHALL NOT return non-zero exit, because Warnings don't warrant failure exit code\n\n# KIRK Contracts (Section 2)\n\n## Preconditions\n- Doctor check has 9 passed/4 warnings\n\n## Postconditions\n- Exit code 0 is returned\n\n## Invariants\n- Exit codes follow convention: 0=success, 1=error, 2=not found\n\n# ATDD Tests (Section 4)\n\n## Happy Paths\n- Doctor with only warnings returns 0\n\n## Error Paths\n- Doctor with failures returns non-zero\n\n# Implementation Tasks (Section 6)\n\n## Phase 0: Research\n- [ ] Find doctor command exit code logic\n\n## Phase 1: Implementation\n- [ ] Fix exit code to return 0 for warnings-only\n\n## Phase 2: Testing\n- [ ] Verify exit code behavior","status":"open","priority":3,"issue_type":"bug","created_at":"2026-02-11T11:51:17.714730327Z","created_by":"lewis","updated_at":"2026-02-11T11:51:17.714730327Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2ua","title":"HIGH: Fix zjj config crash on corrupted TOML","description":"# Clarifications (Section 0)\n\n## Resolved Questions\n- Config file is at ~/.config/zellij/zjj/config.toml\n- Toml parser is used for parsing\n\n## Open Questions\n- None\n\n## Assumptions\n- Original config file should not be modified during recovery\n\n# EARS Requirements (Section 1)\n\n## Ubiquitous\nTHE SYSTEM SHALL handle corrupted config files gracefully\n\n## Event-Driven\n- WHEN user runs 'zjj config' with corrupted TOML, THE SYSTEM SHALL return helpful error with recovery options\n\n## Unwanted\n- IF config TOML is invalid, THE SYSTEM SHALL NOT crash with panic, because User experience is degraded and blocks all operations\n\n## Optional\nNone\n\n## State-Driven\nNone\n\n# KIRK Contracts (Section 2)\n\n## Preconditions\n- Corrupted config.toml file exists\n\n## Postconditions\n- Command returns exit code 1 with helpful error message\n- Recovery options are suggested to user\n\n## Invariants\n- No panic occurs\n- Original config file is not modified\n\n# Research Requirements (Section 2.5)\n\n## Files to Read\n- Find TOML parsing code in the codebase\n- Look for config command implementation\n\n## Patterns to Find\n- config.*toml, parse.*error, toml.*from_str\n\n## Prior Art\n- Standard TOML parse error handling patterns\n\n# Inversions (Section 3)\n\n## Security\nNone - this is error handling, not security feature\n\n## Usability\n- Recovery should guide user, not fail\n\n## Data Integrity\n- Original config file must never be modified by error recovery\n\n## Integration Failures\n- TOML parse errors should not crash the CLI\n\n# ATDD Tests (Section 4)\n\n## Happy Paths\n- Valid config file is parsed correctly\n\n## Error Paths\n- Corrupted TOML returns error with recovery hint\n- Invalid boolean value is rejected\n\n## Edge Cases\n- Partially corrupted TOML\n- Empty config file\n\n# E2E Tests (Section 5)\n\n## Pipeline Tests\n- Run zjj config with corrupted TOML, verify no crash\n\n## Scenario Tests\n- Create corrupted config.toml, run zjj config, verify helpful error\n\n# Verification Checkpoints (Section 5.5)\n\n## Research Gate\n- [ ] TOML parsing code is located\n- [ ] Error handling is identified\n\n## Tests Gate\n- [ ] Unit tests pass for corrupted config scenarios\n- [ ] Integration tests pass\n\n## Implementation Gate\n- [ ] Code compiles without warnings\n- [ ] No unwrap() or panic!() in error path\n\n## Integration Gate\n- [ ] zjj config command works with corrupted config\n\n# Implementation Tasks (Section 6)\n\n## Phase 0: Research\n- [ ] Find TOML parsing code in codebase\n- [ ] Identify error handling patterns\n\n## Phase 1: Implementation  \n- [ ] Add TOML parse error recovery\n- [ ] Implement fallback to defaults\n- [ ] Add helpful error messages\n\n## Phase 2: Testing\n- [ ] Add unit tests for corrupted config scenarios\n- [ ] Verify no panics occur\n\n# Failure Modes (Section 7)\n\n## Symptoms\n- Command crashes with stack trace\n- Panic in TOML parser\n\n## Causes\n- Missing error handling in TOML parsing\n- unwrap() calls on parse results\n\n## Debugging Commands\n- Run with corrupted config and observe output\n- Check for panic in logs\n\n# Anti-Hallucination (Section 7.5)\n\n## Read-Before-Write Rules\n- MUST read existing TOML parsing code before modifying\n- MUST NOT assume current error handling without verification\n\n## API Existence Checks\n- Verify toml crate is available\n- Verify error type is accessible\n\n# Context Survival (Section 7.6)\n\n## Progress Files\n- Track which files are modified\n- Document recovery logic\n\n## Recovery Instructions\n- If panic occurs during implementation, revert changes and test incrementally\n\n# Completion Checklist (Section 8)\n\n- [ ] Code compiles (moon run :check)\n- [ ] Tests pass (moon run :test)\n- [ ] Code is formatted (moon run :fmt-fix)\n- [ ] No clippy warnings (moon run :clippy)\n- [ ] Unit tests added for error scenarios\n- [ ] Integration verified with corrupted config\n- [ ] Error messages are helpful\n- [ ] No panics occur\n\n# Context (Section 9)\n\n## Related Files\n- Config command implementation\n- TOML parsing utilities\n\n## Similar Implementations\n- Standard CLI error handling patterns\n\n# AI Hints (Section 10)\n\n## DO\n- Use Result<T, E> for TOML parsing\n- Provide actionable error messages\n- Implement fallback defaults\n\n## DON'T\n- Use unwrap() on parse results\n- Panic on invalid input\n- Modify original config file\n\n## Code Patterns\n- toml::from_str returns Result, handle with ?\n- Provide recovery suggestions in error message","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-11T11:50:48.839168993Z","created_by":"lewis","updated_at":"2026-02-11T11:57:17.481260660Z","closed_at":"2026-02-11T11:57:17.481205090Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-31c","title":"LOW: Add config boolean type validation","description":"# Clarifications (Section 0)\n\n## Resolved Questions\n- Config schema defines boolean fields\n\n## Open Questions\nNone\n\n## Assumptions\nNone\n\n# EARS Requirements (Section 1)\n\n## Ubiquitous\nTHE SYSTEM SHALL validate config field types\n\n## Event-Driven\n- WHEN user sets boolean config to non-boolean value, THE SYSTEM SHALL reject with type error\n\n## Unwanted\n- IF string value is provided for boolean field, THE SYSTEM SHALL NOT silently accept, because Silent acceptance leads to unexpected behavior\n\n# KIRK Contracts (Section 2)\n\n## Preconditions\n- Config has use_tabs = 'invalid-value-not-bool'\n\n## Postconditions\n- Command fails with type validation error\n\n## Invariants\n- Boolean fields always contain boolean values\n\n# ATDD Tests (Section 4)\n\n## Happy Paths\n- Valid boolean values are accepted\n\n## Error Paths\n- String values for boolean fields are rejected\n\n# Implementation Tasks (Section 6)\n\n## Phase 0: Research\n- [ ] Find config parsing code\n\n## Phase 1: Implementation\n- [ ] Add boolean type validation\n\n## Phase 2: Testing\n- [ ] Add test for invalid boolean values","status":"open","priority":3,"issue_type":"bug","created_at":"2026-02-11T11:51:07.269218660Z","created_by":"lewis","updated_at":"2026-02-11T11:51:07.269218660Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-34t","title":"LOW: Config silently ignores invalid boolean strings","description":"# Clarifications (Section 0)\n\n## Resolved Questions\n- Config accepts `use_tabs = \\\"invalid-value-not-bool\\\"` without error\n- Default value is used instead of rejecting invalid value\n\n## Open Questions\nNone\n\n## Assumptions\n- Boolean fields should reject non-boolean values\n\n# EARS Requirements (Section 1)\n\n## Ubiquitous\nTHE SYSTEM SHALL reject invalid types for boolean config fields\n\n## Event-Driven\n- WHEN user sets boolean config to non-boolean value, THE SYSTEM SHALL reject with type error\n\n## Unwanted\n- IF string value is provided for boolean field, THE SYSTEM SHALL NOT silently accept, because Silent acceptance leads to unexpected behavior\n\n# KIRK Contracts (Section 2)\n\n## Preconditions\n- Config has use_tabs = \\\"invalid-value-not-bool\\\"\n\n## Postconditions\n- Command fails with type validation error\n\n## Invariants\n- Boolean fields always contain boolean values\n\n# ATDD Tests (Section 4)\n\n## Happy Paths\n- Valid boolean values (true/false) are accepted\n\n## Error Paths\n- String values for boolean fields are rejected\n\n# Implementation Tasks (Section 6)\n\n## Phase 0: Research\n- [ ] Find where boolean config fields are deserialized\n\n## Phase 1: Implementation\n- [ ] Add custom deserializer for boolean fields\n\n## Phase 2: Testing\n- [ ] Add test for invalid boolean values","status":"closed","priority":3,"issue_type":"bug","created_at":"2026-02-11T11:57:34.988819738Z","created_by":"lewis","updated_at":"2026-02-11T12:51:08.238993571Z","closed_at":"2026-02-11T12:51:08.238958581Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-35w","title":"INFO: Improve retry error messages","description":"# Clarifications (Section 0)\n\n## Resolved Questions\n- Both errors currently show similar confusing messages\n\n## Open Questions\nNone\n\n## Assumptions\nNone\n\n# EARS Requirements (Section 1)\n\n## Ubiquitous\nTHE SYSTEM SHALL provide clear, actionable error messages\n\n## Event-Driven\n- WHEN user runs retry with no failed operation, THE SYSTEM SHALL say 'No failed operation to retry'\n\n## Unwanted\n- IF session doesn't exist, THE SYSTEM SHALL NOT show retry-specific error, because Wrong error confuses users\n\n# Implementation Tasks (Section 6)\n\n## Phase 0: Research\n- [ ] Find retry command error handling\n\n## Phase 1: Implementation\n- [ ] Fix error messages to be specific\n\n## Phase 2: Testing\n- [ ] Test error message clarity","status":"open","priority":4,"issue_type":"task","created_at":"2026-02-11T11:51:24.545616788Z","created_by":"lewis","updated_at":"2026-02-11T11:51:24.545616788Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3b0","title":"MEDIUM: Fix integrity repair crash on bad TOML","description":"# Clarifications (Section 0)\n\n## Resolved Questions\n- Integrity repair checks config file integrity\n\n## Open Questions\nNone\n\n## Assumptions\nNone\n\n# EARS Requirements (Section 1)\n\n## Ubiquitous\nTHE SYSTEM SHALL handle TOML parse errors gracefully\n\n## Event-Driven\n- WHEN user runs 'zjj integrity repair' with bad TOML, THE SYSTEM SHALL suggest recovery options\n\n## Unwanted\n- IF TOML parse error occurs, THE SYSTEM SHALL NOT crash, because Recovery should guide user, not fail\n\n# KIRK Contracts (Section 2)\n\n## Preconditions\n- Corrupted config.toml file exists\n\n## Postconditions\n- Helpful error with recovery suggestion is displayed\n- Command exits cleanly\n\n## Invariants\n- No panic occurs\n\n# ATDD Tests (Section 4)\n\n## Happy Paths\n- Integrity check passes for valid config\n\n## Error Paths\n- Corrupted TOML shows recovery suggestion\n\n# Implementation Tasks (Section 6)\n\n## Phase 0: Research\n- [ ] Find integrity repair code\n\n## Phase 1: Implementation\n- [ ] Add graceful error handling for TOML parse errors\n\n## Phase 2: Testing\n- [ ] Add test for corrupted config handling","status":"open","priority":2,"issue_type":"bug","created_at":"2026-02-11T11:50:59.279745228Z","created_by":"lewis","updated_at":"2026-02-11T11:50:59.279745228Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3bj","title":"INFO: Reject unknown flags with error","description":"# Clarifications (Section 0)\n\n## Resolved Questions\n- Unknown flags currently show help instead of erroring\n\n## Open Questions\nNone\n\n## Assumptions\nNone\n\n# EARS Requirements (Section 1)\n\n## Ubiquitous\nTHE SYSTEM SHALL reject invalid input\n\n## Event-Driven\n- WHEN user provides unknown flag, THE SYSTEM SHALL error with 'unexpected argument'\n\n## Unwanted\n- IF unknown flag provided, THE SYSTEM SHALL NOT silently ignore, because Silently ignoring leads to unexpected behavior\n\n# Implementation Tasks (Section 6)\n\n## Phase 0: Research\n- [ ] Find flag parsing code\n\n## Phase 1: Implementation\n- [ ] Configure clap to error on unknown flags\n\n## Phase 2: Testing\n- [ ] Test unknown flag rejection","status":"open","priority":4,"issue_type":"bug","created_at":"2026-02-11T11:51:29.855231330Z","created_by":"lewis","updated_at":"2026-02-11T11:51:29.855231330Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3g5","title":"INFO: Fix export ambiguous args handling","description":"# Clarifications (Section 0)\n\n## Resolved Questions\n- export interprets positional args as session names\n\n## Open Questions\nNone\n\n## Assumptions\nNone\n\n# EARS Requirements (Section 1)\n\n## Ubiquitous\nTHE SYSTEM SHALL disambiguate command arguments\n\n## Event-Driven\n- WHEN user provides output file path, THE SYSTEM SHALL require -o flag\n\n## Unwanted\n- IF ambiguous argument provided, THE SYSTEM SHALL NOT misinterpret as session name, because Wrong interpretation leads to data loss\n\n# Implementation Tasks (Section 6)\n\n## Phase 0: Research\n- [ ] Find export command implementation\n\n## Phase 1: Implementation\n- [ ] Make -o required or clarify argument handling\n\n## Phase 2: Testing\n- [ ] Test ambiguous input handling","status":"open","priority":4,"issue_type":"task","created_at":"2026-02-11T11:51:27.867260726Z","created_by":"lewis","updated_at":"2026-02-11T11:51:27.867260726Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-4r4","title":"LOW: Fail on nonexistent resources","description":"# Clarifications (Section 0)\n\n## Resolved Questions\n- Commands currently return exit code 0 for nonexistent resources\n\n## Open Questions\nNone\n\n## Assumptions\nNone\n\n# EARS Requirements (Section 1)\n\n## Ubiquitous\nTHE SYSTEM SHALL report errors when operating on nonexistent resources\n\n## Event-Driven\n- WHEN user moves nonexistent bookmark, THE SYSTEM SHALL return error\n\n## Unwanted\n- IF resource doesn't exist, THE SYSTEM SHALL NOT return success, because Silent failure masks user errors\n\n# KIRK Contracts (Section 2)\n\n## Preconditions\n- Bookmark/claim target doesn't exist\n\n## Postconditions\n- Command returns non-zero exit code with error\n\n## Invariants\n- Success implies operation completed\n\n# ATDD Tests (Section 4)\n\n## Happy Paths\n- Moving existing bookmark succeeds\n\n## Error Paths\n- Moving nonexistent bookmark fails with error\n\n# Implementation Tasks (Section 6)\n\n## Phase 0: Research\n- [ ] Find bookmark move and claim code\n\n## Phase 1: Implementation\n- [ ] Add existence checks before operations\n\n## Phase 2: Testing\n- [ ] Add tests for nonexistent resource handling","status":"open","priority":3,"issue_type":"bug","created_at":"2026-02-11T11:51:11.559910702Z","created_by":"lewis","updated_at":"2026-02-11T11:51:11.559910702Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-rmf","title":"INFO: Add --json flag to dashboard or remove from help","description":"# Clarifications (Section 0)\n\n## Resolved Questions\n- --json flag exists in help but not implemented\n\n## Open Questions\nNone\n\n## Assumptions\nNone\n\n# EARS Requirements (Section 1)\n\n## Ubiquitous\nTHE SYSTEM SHALL have consistent CLI interface\n\n## Event-Driven\n- WHEN user uses --json flag, THE SYSTEM SHALL either support it or error clearly\n\n## Unwanted\n- IF --json is documented, THE SYSTEM SHALL NOT error with 'unexpected argument', because Documentation should match implementation\n\n# Implementation Tasks (Section 6)\n\n## Phase 0: Research\n- [ ] Check dashboard implementation\n\n## Phase 1: Implementation\n- [ ] Either implement --json or update help docs\n\n## Phase 2: Testing\n- [ ] Verify consistency","status":"open","priority":4,"issue_type":"task","created_at":"2026-02-11T11:51:21.212194368Z","created_by":"lewis","updated_at":"2026-02-11T11:51:21.212194368Z","source_repo":".","compaction_level":0,"original_size":0}
